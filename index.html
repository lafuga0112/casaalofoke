<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tabla de Puntuaciones - Alofoke Reality Show</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="images/fav.jpg" type="image/jpeg">
    <meta name="description" content="Tabla de Puntuaciones - Alofoke Reality Show">
    <meta name="keywords" content="Alofoke, Reality Show, Puntuaciones, Tabla de Puntuaciones">
    <meta name="author" content="Alofoke">
    <meta name="robots" content="index, follow">
    <meta name="googlebot" content="index, follow">
    <meta name="google" content="notranslate">
    <meta name="google-site-verification" content="google-site-verification=google-site-verification">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;400;500;600;700&display=swap" rel="stylesheet">

</head>
<body>
    <!-- Header Principal -->
    <header class="header">
        <div class="header-content">
            <div class="day-indicator">
                <div class="day-circle">
                    <span class="day-number">4</span>
                </div>
                <span class="day-text">DIA</span>
            </div>
            
            <div class="social-header">
                <div class="social-message">
                    <span class="social-message-text">Disfruta del Reality en los canales oficiales</span>
                </div>
                <div class="social-links">
                    <a href="https://www.instagram.com/casaalofoke/" target="_blank" class="social-header-link instagram">
                        <img src="images/ig.png" alt="Instagram" class="social-header-icon">
                        <span class="social-header-text">@casaalofoke</span>
                    </a>
                    <a href="https://www.youtube.com/watch?app=desktop&v=gOJvu0xYsdo&fbclid=PAZXh0bgNhZW0CMTEAAaeucH45DPPbuwn5_nzesxOrArvYTOJWZbaATMYH-nwcS3XmuLiTHjP4lZ8EFg_aem_fzVrWP8OPCdZxhL7yXspLg" target="_blank" class="social-header-link youtube">
                        <img src="images/yt.png" alt="YouTube" class="social-header-icon">
                        <span class="social-header-text">Alofoke Radio Show</span>
                    </a>
                </div>
            </div>
        </div>
    </header>

    <!-- Contenedor Principal -->
    <main class="main-container">
        <!-- Panel de Concursantes -->
        <section class="contestants-panel">
            <div class="contestants-grid">
                <!-- LA GIGI -->
                <div class="contestant-card">
                    <div class="contestant-name">LA GIGI</div>
                    <div class="contestant-photo">
                        <img src="images/gigi.jpg" alt="LA GIGI" class="profile-img" onclick="openContestantProfile('gigi')">
                    </div>
                    <div class="contestant-score" id="score-gigi">0PTS</div>
                </div>

                <!-- GIUSEPPE/TRUJILLO -->
                <div class="contestant-card">
                    <div class="contestant-name">GIUSEPPE</div>
                    <div class="contestant-photo">
                        <img src="images/GIUSEPPE.jpg" alt="GIUSEPPE" class="profile-img" onclick="openContestantProfile('giuseppe')">
                    </div>
                    <div class="contestant-score" id="score-giuseppe">0PTS</div>
                </div>

                <!-- VLADY -->
                <div class="contestant-card">
                    <div class="contestant-name">VLADY</div>
                    <div class="contestant-photo">
                        <img src="images/vlady.jpg" alt="VLADY" class="profile-img" onclick="openContestantProfile('vlady')">
                    </div>
                    <div class="contestant-score" id="score-vlady">0PTS</div>
                </div>

                <!-- CRAZY -->
                <div class="contestant-card">
                    <div class="contestant-name">CRAZY</div>
                    <div class="contestant-photo">
                        <img src="images/CRAZY.jpg" alt="CRAZY" class="profile-img" onclick="openContestantProfile('crazy')">
                    </div>
                    <div class="contestant-score" id="score-crazy">0PTS</div>
                </div>

                <!-- Pamela -->
                <div class="contestant-card">
                    <div class="contestant-name">PAMELA</div>
                    <div class="contestant-photo">
                        <img src="images/pamela.jpg" alt="PAMELA" class="profile-img" onclick="openContestantProfile('pamela')">
                    </div>
                    <div class="contestant-score" id="score-pamela">0PTS</div>
                </div>

                <!-- KAROLA -->
                <div class="contestant-card">
                    <div class="contestant-name">KAROLA</div>
                    <div class="contestant-photo">
                        <img src="images/karola.jpg" alt="KAROLA" class="profile-img" onclick="openContestantProfile('karola')">
                    </div>
                    <div class="contestant-score" id="score-karola">0PTS</div>
                </div>

                <!-- JIMENEZ -->
                <div class="contestant-card">
                    <div class="contestant-name">JIMENEZ</div>
                    <div class="contestant-photo">
                        <img src="images/JIMENEZ.jpg" alt="JIMENEZ" class="profile-img" onclick="openContestantProfile('jimenez')">
                    </div>
                    <div class="contestant-score" id="score-jimenez">0PTS</div>
                </div>

                <!-- LA PEKI -->
                <div class="contestant-card">
                    <div class="contestant-name">LA PEKI</div>
                    <div class="contestant-photo">
                        <img src="images/peki.jpg" alt="LA PEKI" class="profile-img" onclick="openContestantProfile('peki')">
                    </div>
                    <div class="contestant-score" id="score-peky">0PTS</div>
                </div>

                <!-- CRUSITA -->
                <div class="contestant-card">
                    <div class="contestant-name">CRUSITA</div>
                    <div class="contestant-photo">
                        <img src="images/CRUSITA.jpg" alt="CRUSITA" class="profile-img" onclick="openContestantProfile('crusita')">
                    </div>
                    <div class="contestant-score" id="score-crusita">0PTS</div>
                </div>

                <!-- LUISE -->
                <div class="contestant-card">
                    <div class="contestant-name">LUISE</div>
                    <div class="contestant-photo">
                        <img src="images/luise.jpg" alt="LUISE" class="profile-img" onclick="openContestantProfile('luise')">
                    </div>
                    <div class="contestant-score" id="score-luise">0PTS</div>
                </div>
            </div>
            
            <!-- Leyenda del Sistema de Puntuaci√≥n -->
            <div class="scoring-legend">
                <div class="legend-header">
                    <h3>INFORMACI√ìN DEL SISTEMA DE PUNTUACI√ìN</h3>
                </div>
                <div class="legend-content">
                    <div class="legend-item">
                        <span class="legend-label">Contabilizaci√≥n desde:</span>
                        <span class="legend-value">13 de Agosto, 2025 - 12:20 AM</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-label">√öltima actualizaci√≥n:</span>
                        <span class="legend-value" id="last-update">--:-- --</span>
                    </div>
                </div>
                
                <!-- Disclaimer Legal -->
                <div class="disclaimer">
                    <div class="disclaimer-content">
                        <span class="disclaimer-text">
                            <strong>IMPORTANTE:</strong> Este sistema de puntuaci√≥n NO es un conteo oficial de parte de la empresa Alofoke. 
                            Fue creado por un fan como herramienta informativa y de entretenimiento. 
                            Los resultados pueden no reflejar la puntuaci√≥n real del reality show.
                        </span>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Socket.IO Client -->
    <script src="/socket.io/socket.io.js"></script>

    <!-- Script para actualizar puntuaciones en tiempo real -->
    <script>
        // Conexi√≥n WebSocket
        const socket = io({
            transports: ['websocket', 'polling'],
            path: '/socket.io',
            reconnection: true,
            reconnectionAttempts: 10,
            reconnectionDelay: 5000,
            reconnectionDelayMax: 60000,
            timeout: 60000
        });
        
        // Variables globales
        let isConnected = false;
        // Funci√≥n para solicitar puntuaciones via WebSocket
        function requestScores() {
            if (isConnected) {
                socket.emit('get-puntuaciones');
                console.log('üì° Solicitando puntuaciones via WebSocket');
            } else {
                console.log('‚ùå WebSocket no conectado, no se pueden obtener puntuaciones');
            }
        }

        // Links de Instagram de los concursantes
        const instagramLinks = {
            gigi: 'https://www.instagram.com/lagigird/',
            giuseppe: 'https://www.instagram.com/gbenignini/', // Ejemplo - ajustar con el real
            vlady: 'hhttps://www.instagram.com/justvladyg/', // Ejemplo - ajustar con el real
            crazy: 'https://www.instagram.com/crazydesignrd/', // Ejemplo - ajustar con el real
            pamela: 'https://www.instagram.com/shuupamela6.9/', // Ejemplo - ajustar con el real
            karola: 'https://www.instagram.com/karolalcendra_/', // Ejemplo - ajustar con el real
            jimenez: 'https://www.instagram.com/jimenez_tv/', // Ejemplo - ajustar con el real
            peki: 'https://www.instagram.com/lapekipr/', // Ejemplo - ajustar con el real
            crusita: 'https://www.instagram.com/crusita___/', // Ejemplo - ajustar con el real
            luise: 'https://www.instagram.com/luisemartinezz12/' // Ejemplo - ajustar con el real
        };

        // Funci√≥n para abrir Instagram del concursante
        function openContestantProfile(contestantId) {
            const instagramUrl = instagramLinks[contestantId];
            if (instagramUrl) {
                window.open(instagramUrl, '_blank');
            } else {
                alert('Instagram del concursante no disponible a√∫n');
            }
        }

        // Funci√≥n para reordenar concursantes seg√∫n puntuaci√≥n
        function reorderContestants(concursantes) {
            const container = document.querySelector('.contestants-grid');
            const cards = Array.from(container.children);
            
            // Crear un mapa de las cards actuales por slug
            const cardMap = {};
            cards.forEach(card => {
                const scoreElement = card.querySelector('.contestant-score');
                const id = scoreElement.id;
                if (id && id.startsWith('score-')) {
                    const slug = id.replace('score-', '');
                    cardMap[slug] = card;
                }
            });
            
            // Reordenar seg√∫n la nueva data
            container.innerHTML = '';
            concursantes.forEach(concursante => {
                const card = cardMap[concursante.slug];
                if (card) {
                    container.appendChild(card);
                } else {
                    console.warn(`No se encontr√≥ card para: ${concursante.slug}`);
                }
            });
        }

        // Funci√≥n para actualizar la hora de √∫ltima actualizaci√≥n
        function updateLastUpdateTime() {
            const now = new Date();
            const options = {
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                hour12: true,
                timeZone: 'America/Santo_Domingo'
            };
            
            const timeString = now.toLocaleTimeString('es-DO', options);
            const dateString = now.toLocaleDateString('es-DO', {
                day: '2-digit',
                month: '2-digit',
                year: 'numeric',
                timeZone: 'America/Santo_Domingo'
            });
            
            document.getElementById('last-update').textContent = `${dateString} - ${timeString}`;
        }

        // WebSocket Event Listeners
        socket.on('connect', () => {
            isConnected = true;
            console.log('üîå Conectado al servidor WebSocket');
            // Solicitar puntuaciones iniciales al conectar
            requestScores();
        });
        
        socket.on('disconnect', () => {
            isConnected = false;
            console.log('üîå Desconectado del servidor WebSocket');
        });
        
        socket.on('puntuaciones-update', (data) => {
            console.log('üìä Puntuaciones actualizadas via WebSocket');
            if (data.success) {
                reorderContestants(data.data);
                data.data.forEach((concursante) => {
                    const scoreElement = document.getElementById(`score-${concursante.slug}`);
                    if (scoreElement) {
                        scoreElement.textContent = `${Math.round(concursante.puntos_reales)}PTS`;
                    }
                });
            }
        });
        
        socket.on('estadisticas-update', (stats) => {
            console.log('üìà Estad√≠sticas actualizadas via WebSocket');
            actualizarEstadisticasPanel(stats);
        });
        
        socket.on('dia-actualizado', (info) => {
            console.log('üìÖ D√≠a del reality actualizado:', info);
            actualizarDiaEnHeader(info.diaActual, info.titulo);
        });
        
        socket.on('monitor-status', (status) => {
            console.log('üìä Estado del monitor:', status);
            if (status.diaActual) {
                actualizarDiaEnHeader(status.diaActual, status.tituloVideo);
            }
        });
        
        // Funci√≥n para actualizar estad√≠sticas del panel
        function actualizarEstadisticasPanel(stats) {
            // Ya no hay footer que actualizar, las estad√≠sticas se manejan solo por WebSocket
            console.log('üìà Estad√≠sticas recibidas:', stats);
        }
        
        // Funci√≥n para actualizar el d√≠a en el header
        function actualizarDiaEnHeader(dia, titulo) {
            const dayNumberElement = document.querySelector('.day-number');
            const dayTextElement = document.querySelector('.day-text');
            
            if (dayNumberElement) {
                // Animaci√≥n de cambio
                dayNumberElement.style.transform = 'scale(1.2)';
                dayNumberElement.style.color = '#FFD700';
                
                setTimeout(() => {
                    dayNumberElement.textContent = dia;
                    setTimeout(() => {
                        dayNumberElement.style.transform = 'scale(1)';
                        dayNumberElement.style.color = '#ffffff';
                    }, 200);
                }, 100);
            }
            
            // Opcional: actualizar el t√≠tulo en la consola para debug
            if (titulo) {
                console.log(`üé¨ T√≠tulo del video: "${titulo}"`);
            }
            
            // Notificaci√≥n eliminada - solo actualiza silenciosamente
        }
        
        // Funci√≥n para animar concursantes que recibieron puntos
        function animarConcursantesQueRecibieronPuntos(concursantesNombres) {
            concursantesNombres.forEach(nombreConcursante => {
                // Buscar la card por el nombre del concursante
                const cards = document.querySelectorAll('.contestant-card');
                cards.forEach(card => {
                    const nombreElement = card.querySelector('.contestant-name');
                    if (nombreElement && nombreElement.textContent.trim() === nombreConcursante) {
                        // Animar la card
                        card.classList.add('points-received');
                        
                        // Remover la animaci√≥n despu√©s de que termine
                        setTimeout(() => {
                            card.classList.remove('points-received');
                        }, 1000);
                    }
                });
            });
        }

        // Inicializar
        document.addEventListener('DOMContentLoaded', function() {
            updateLastUpdateTime(); // Actualizar hora inmediatamente
            
            // Actualizar hora cada 5 minutos (solo la hora, los datos vienen por WebSocket)
            setInterval(() => {
                updateLastUpdateTime();
            }, 300000);
        });
    </script>
</body>
</html> 